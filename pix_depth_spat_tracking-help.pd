#N canvas 335 242 783 518 10;
#X obj 559 83 gemwin;
#X msg 508 36 destroy;
#X msg 600 53 color 1 0 0;
#X obj 63 92 gemhead;
#X obj 168 459 pix_texture;
#X obj 168 481 rectangle 4 3;
#X text 11 23 for use with pix_freenect or pix_openni depth output
(mm output only);
#X obj 188 223 bng 15 250 50 0 empty empty trigger 17 7 0 10 -262144
-1 -1;
#X msg 559 13 dimen 640 480 \, create \, 1;
#X obj 168 91 gemhead;
#X msg 83 132 angle \$1;
#X floatatom 83 114 5 0 0 0 - - -;
#X obj 63 154 pix_freenect 0 1 1;
#X floatatom 315 367 5 0 0 0 threshold - -;
#X obj 115 178 alpha;
#X msg 424 144 vertices x1 y1 z1 x2 y2 z2 x3 y3 z3 x4 y4 z4;
#X text 336 390 creation argument: threshold;
#X msg 241 118 resolution x y z;
#X obj 168 389 pix_depth_spat_tracking 1;
#X obj 620 76 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X msg 259 166 resolution 3 3 3;
#X msg 263 194 resolution 10 10 10;
#X msg 249 146 resolution 1 1 1;
#X msg 412 267 vertices 0 0 1000 -1000 0 1000 0 1000 1000 0 0 2000
;
#X msg 86 331 print;
#X msg 81 362 inverse;
#X floatatom 149 223 5 0 0 0 - - -;
#X msg 411 296 vertices -1048 -891 1301 441 -693 1602 -1761 -417 2084
-985 -620 1055;
#N canvas 752 51 470 416 filter 1;
#X obj 61 18 inlet;
#N canvas 0 22 450 300 count 0;
#X obj 59 39 inlet;
#X obj 59 61 t b;
#X obj 59 83 int 0;
#X obj 59 105 t f f;
#X obj 108 114 + 1;
#X msg 138 85 0;
#X obj 143 29 r reset;
#X obj 59 127 outlet;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 2 0 3 0;
#X connect 3 0 7 0;
#X connect 3 1 4 0;
#X connect 4 0 2 1;
#X connect 5 0 2 1;
#X connect 5 0 7 0;
#X connect 6 0 5 0;
#X restore 32 144 pd count;
#X floatatom 32 166 5 0 0 0 - - -;
#X obj 289 63 s reset;
#X obj 286 19 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#N canvas 0 22 450 300 count 0;
#X obj 59 39 inlet;
#X obj 59 61 t b;
#X obj 59 83 int 0;
#X obj 59 105 t f f;
#X obj 108 114 + 1;
#X msg 138 85 0;
#X obj 143 29 r reset;
#X obj 59 127 outlet;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 2 0 3 0;
#X connect 3 0 7 0;
#X connect 3 1 4 0;
#X connect 4 0 2 1;
#X connect 5 0 2 1;
#X connect 5 0 7 0;
#X connect 6 0 5 0;
#X restore 102 144 pd count;
#X floatatom 102 166 5 0 0 0 - - -;
#N canvas 0 22 450 300 count 0;
#X obj 59 39 inlet;
#X obj 59 61 t b;
#X obj 59 83 int 0;
#X obj 59 105 t f f;
#X obj 108 114 + 1;
#X msg 138 85 0;
#X obj 143 29 r reset;
#X obj 59 127 outlet;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 2 0 3 0;
#X connect 3 0 7 0;
#X connect 3 1 4 0;
#X connect 4 0 2 1;
#X connect 5 0 2 1;
#X connect 5 0 7 0;
#X connect 6 0 5 0;
#X restore 142 194 pd count;
#X floatatom 142 216 5 0 0 0 - - -;
#N canvas 0 22 450 300 count 0;
#X obj 59 39 inlet;
#X obj 59 61 t b;
#X obj 59 83 int 0;
#X obj 59 105 t f f;
#X obj 108 114 + 1;
#X msg 138 85 0;
#X obj 143 29 r reset;
#X obj 59 127 outlet;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 2 0 3 0;
#X connect 3 0 7 0;
#X connect 3 1 4 0;
#X connect 4 0 2 1;
#X connect 5 0 2 1;
#X connect 5 0 7 0;
#X connect 6 0 5 0;
#X restore 212 214 pd count;
#X floatatom 212 236 5 0 0 0 - - -;
#N canvas 0 22 450 300 count 0;
#X obj 59 39 inlet;
#X obj 59 61 t b;
#X obj 59 83 int 0;
#X obj 59 105 t f f;
#X obj 99 123 + 1;
#X msg 138 85 0;
#X obj 143 29 r reset;
#X obj 62 153 outlet;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 2 0 3 0;
#X connect 3 0 7 0;
#X connect 3 1 4 0;
#X connect 4 0 2 1;
#X connect 5 0 2 1;
#X connect 5 0 7 0;
#X connect 6 0 5 0;
#X restore 372 274 pd count;
#X floatatom 372 296 5 0 0 0 - - -;
#N canvas 0 22 450 300 count 0;
#X obj 59 39 inlet;
#X obj 59 61 t b;
#X obj 59 83 int 0;
#X obj 59 105 t f f;
#X obj 108 114 + 1;
#X msg 138 85 0;
#X obj 143 29 r reset;
#X obj 59 127 outlet;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 2 0 3 0;
#X connect 3 0 7 0;
#X connect 3 1 4 0;
#X connect 4 0 2 1;
#X connect 5 0 2 1;
#X connect 5 0 7 0;
#X connect 6 0 5 0;
#X restore 276 247 pd count;
#X floatatom 276 269 5 0 0 0 - - -;
#X obj 61 40 unpack 0 0 0 0;
#X obj 61 79 moses 100;
#X obj 112 118 moses 200;
#X obj 163 155 moses 300;
#X obj 217 179 moses 400;
#X obj 267 208 moses 500;
#X obj 347 237 moses 600;
#X connect 0 0 15 0;
#X connect 1 0 2 0;
#X connect 4 0 3 0;
#X connect 5 0 6 0;
#X connect 7 0 8 0;
#X connect 9 0 10 0;
#X connect 11 0 12 0;
#X connect 13 0 14 0;
#X connect 15 3 16 0;
#X connect 16 0 1 0;
#X connect 16 1 17 0;
#X connect 17 0 5 0;
#X connect 17 1 18 0;
#X connect 18 0 7 0;
#X connect 18 1 19 0;
#X connect 19 0 9 0;
#X connect 19 1 20 0;
#X connect 20 0 13 0;
#X connect 20 1 21 0;
#X connect 21 0 11 0;
#X restore 241 417 pd filter;
#X obj 215 270 s reset;
#X obj 188 243 t b b;
#N canvas 0 22 450 300 openni-rec 0;
#X obj 196 107 outlet;
#X obj 139 39 gemhead;
#X obj 256 48 gemhead;
#X obj 73 39 r \$0-prop;
#N canvas 405 50 721 288 RECORD 0;
#X obj 105 179 s \$0-prop;
#X obj 119 111 vradio 15 1 0 2 empty empty empty 0 -8 0 10 -262144
-1 -1 0;
#X text 141 109 OFF;
#X text 141 125 ON;
#X msg 119 145 record \$1;
#X obj 206 111 vradio 15 1 0 2 empty empty empty 0 -8 0 10 -262144
-1 -1 0;
#X text 228 109 OFF;
#X text 228 125 ON;
#X msg 206 145 play \$1;
#X msg 300 144 playback_speed \$1;
#X floatatom 300 122 5 0 0 0 - - -;
#X floatatom 298 199 5 0 0 0 - - -;
#X msg 298 221 jump_image_frame \$1;
#X floatatom 440 203 5 0 0 0 - - -;
#X msg 440 225 jump_depth_frame \$1;
#X msg 105 56 open hallo.oni;
#X obj -11 52 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#N canvas 110 287 200 194 open 0;
#X obj 38 87 list prepend open;
#X obj 38 112 list trim;
#X obj 38 51 openpanel;
#X obj 38 140 outlet;
#X obj 38 16 inlet;
#X connect 0 0 1 0;
#X connect 1 0 3 0;
#X connect 2 0 0 0;
#X connect 4 0 2 0;
#X restore -11 78 pd open;
#X obj 44 52 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#N canvas 110 287 200 194 save 0;
#X obj 38 87 list prepend open;
#X obj 38 112 list trim;
#X obj 38 140 outlet;
#X obj 38 16 inlet;
#X obj 38 51 savepanel;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 3 0 4 0;
#X connect 4 0 0 0;
#X restore 44 78 pd save;
#X text 339 120 this is not working very well;
#X text 503 24 you can now switch between;
#X text 502 43 playback and live;
#X text 495 73 playback speed is not realtime;
#X text 506 89 i don't know why...?;
#X text -6 15 record image and depth stream to .oni file and playback
;
#X text 117 94 start rec;
#X text 206 91 start play;
#X obj 298 250 s \$0-prop;
#X obj 440 247 s \$0-prop;
#X obj 300 166 s \$0-prop;
#X text -6 98 (same messages);
#X text 202 55 set the open/save filename/path;
#X connect 1 0 4 0;
#X connect 4 0 0 0;
#X connect 5 0 8 0;
#X connect 8 0 0 0;
#X connect 9 0 30 0;
#X connect 10 0 9 0;
#X connect 11 0 12 0;
#X connect 12 0 28 0;
#X connect 13 0 14 0;
#X connect 14 0 29 0;
#X connect 15 0 0 0;
#X connect 16 0 17 0;
#X connect 17 0 0 0;
#X connect 18 0 19 0;
#X connect 19 0 0 0;
#X restore 4 7 pd RECORD;
#X obj 139 74 # pix_openni 1 1 1 0 0;
#X connect 1 0 5 0;
#X connect 2 0 5 1;
#X connect 3 0 5 0;
#X connect 5 1 0 0;
#X restore 240 89 pd openni-rec;
#N canvas 338 458 450 300 filters 1;
#X obj 112 147 pix_background_depth 200;
#X obj 204 91 pix_movement_depth 200;
#X obj 57 75 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#N canvas 606 216 450 300 threshold 0;
#X obj 68 40 inlet;
#X obj 67 233 outlet;
#X obj 83 196 pix_threshold_depth;
#X floatatom 401 127 5 0 0 0 max_value(m) - -;
#X floatatom 268 131 5 0 0 0 min_value(m) - -;
#X obj 401 152 * 1000;
#X obj 268 149 * 1000;
#X obj 120 162 tgl 15 0 empty empty whitening 17 7 0 10 -262144 -1
-1 0 1;
#X text 296 109 distance;
#N canvas 783 364 464 262 trim_x_y 0;
#X obj 129 220 outlet;
#X msg 54 175 trim \$1;
#X obj 54 155 tgl 15 0 empty empty ON/OFF 17 7 0 10 -262144 -1 -1 0
1;
#X obj 129 115 nbx 5 14 -1e+37 1e+37 0 0 empty empty empty 0 -8 0 10
-262144 -1 -1 0 256;
#X obj 129 137 * 1000;
#X obj 199 115 nbx 5 14 -1e+37 1e+37 0 0 empty empty empty 0 -8 0 10
-262144 -1 -1 0 256;
#X obj 199 137 * 1000;
#X obj 279 115 nbx 5 14 -1e+37 1e+37 0 0 empty empty empty 0 -8 0 10
-262144 -1 -1 0 256;
#X msg 279 161 y_min \$1;
#X obj 279 137 * 1000;
#X obj 349 115 nbx 5 14 -1e+37 1e+37 0 0 empty empty empty 0 -8 0 10
-262144 -1 -1 0 256;
#X obj 349 137 * 1000;
#X msg 349 161 y_max \$1;
#X msg 129 161 x_min \$1;
#X msg 199 161 x_max \$1;
#X text 64 76 camera is in the center (0 \, 0 \, 0);
#X text 66 112 in meters;
#X text 130 97 left;
#X text 199 97 right;
#X text 279 97 bottom;
#X text 351 96 top;
#X text 63 30 additionally you can trim the depthmap according to real
world x and y coordinates;
#X connect 1 0 0 0;
#X connect 2 0 1 0;
#X connect 3 0 4 0;
#X connect 4 0 13 0;
#X connect 5 0 6 0;
#X connect 6 0 14 0;
#X connect 7 0 9 0;
#X connect 8 0 0 0;
#X connect 9 0 8 0;
#X connect 10 0 11 0;
#X connect 11 0 12 0;
#X connect 12 0 0 0;
#X connect 13 0 0 0;
#X connect 14 0 0 0;
#X restore 102 127 pd trim_x_y;
#X connect 0 0 2 0;
#X connect 2 0 1 0;
#X connect 3 0 5 0;
#X connect 4 0 6 0;
#X connect 5 0 2 3;
#X connect 6 0 2 2;
#X connect 7 0 2 1;
#X connect 9 0 2 0;
#X restore 86 84 pd threshold;
#X msg 48 120 mode 1;
#X obj 183 27 inlet;
#X obj 112 209 outlet;
#X obj 20 45 loadbang;
#X connect 1 0 6 0;
#X connect 2 0 0 0;
#X connect 4 0 0 0;
#X connect 5 0 1 0;
#X connect 7 0 4 0;
#X restore 41 225 pd filters;
#X obj 315 410 print debug-outlet;
#X text 483 168 1x1x1m cube in front of kinect;
#X text 9 7 tracks objects in a parallelepiped formed by 4 vectors
;
#X text 19 53 ignores pixel with alpha=0 values (useful for prior filtering
with pix_background_depth or pix_movement_depth);
#X text 621 455 2013 Matthias Kronlachner;
#X text 655 472 Marian Weger;
#X text 472 250 1x1x1m cube in 1 m distance;
#X obj 275 458 print tracking-data;
#X text 350 116 define resolution (quantization of parallelepiped)
;
#X msg 33 390 visualize \$1;
#X obj 33 369 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 121 280 t b a;
#X obj 380 166 loadbang;
#X msg 412 187 vertices -500 -500 1000 500 -500 1000 -500 500 1000
-500 -500 2000;
#X obj 103 421 pix_depth2rgba 3000;
#X msg 404 219 vertices -500 -500 0 500 -500 0 -500 500 0 -500 -500
1000;
#X connect 1 0 0 0;
#X connect 2 0 0 0;
#X connect 3 0 12 0;
#X connect 4 0 5 0;
#X connect 7 0 30 0;
#X connect 8 0 0 0;
#X connect 9 0 12 1;
#X connect 10 0 12 0;
#X connect 11 0 10 0;
#X connect 12 1 14 0;
#X connect 13 0 18 1;
#X connect 14 0 32 0;
#X connect 15 0 18 0;
#X connect 17 0 18 0;
#X connect 18 0 47 0;
#X connect 18 1 28 0;
#X connect 18 1 40 0;
#X connect 18 2 33 0;
#X connect 19 0 0 0;
#X connect 20 0 18 0;
#X connect 21 0 18 0;
#X connect 22 0 18 0;
#X connect 23 0 18 0;
#X connect 24 0 18 0;
#X connect 25 0 18 0;
#X connect 27 0 18 0;
#X connect 30 0 18 0;
#X connect 30 1 29 0;
#X connect 32 0 44 0;
#X connect 42 0 18 0;
#X connect 43 0 42 0;
#X connect 44 0 30 0;
#X connect 44 1 18 0;
#X connect 45 0 21 0;
#X connect 45 0 46 0;
#X connect 46 0 18 0;
#X connect 47 0 4 0;
#X connect 48 0 18 0;
